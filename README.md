# Vidu API Pythonå®¢æˆ·ç«¯

ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„Vidu API Pythonå®¢æˆ·ç«¯ï¼Œæ”¯æŒå›¾ç”Ÿè§†é¢‘ã€å‚è€ƒç”Ÿè§†é¢‘ã€é¦–å°¾å¸§ç”Ÿè§†é¢‘ã€æ–‡ç”Ÿè§†é¢‘ã€æ™ºèƒ½è¶…æ¸…ã€å¯¹å£å‹ã€æ–‡ç”ŸéŸ³é¢‘ã€å¯æ§æ–‡ç”ŸéŸ³æ•ˆç­‰åŠŸèƒ½ï¼Œå¹¶æ”¯æŒè‡ªåŠ¨ä¸‹è½½ç”Ÿæˆç‰©å’Œç”Ÿæˆç‰©å°é¢ã€‚åŒæ—¶æä¾›åŸºäºGradioçš„Web UIç•Œé¢ã€‚

## åŠŸèƒ½ç‰¹æ€§

- âœ… æ”¯æŒæ‰€æœ‰Vidu APIåŠŸèƒ½
- âœ… è‡ªåŠ¨å‚æ•°éªŒè¯å’Œé”™è¯¯å¤„ç†
- âœ… æ”¯æŒä»»åŠ¡çŠ¶æ€ç›‘æ§å’Œç­‰å¾…
- âœ… **æ–°å¢ï¼šè‡ªåŠ¨ä¸‹è½½ç”Ÿæˆç‰©å’Œç”Ÿæˆç‰©å°é¢**
- âœ… æ”¯æŒæ‰¹é‡ä¸‹è½½å¤šä¸ªä»»åŠ¡
- âœ… æ”¯æŒæœ¬åœ°æ–‡ä»¶å¤„ç†ï¼ˆBase64ç¼–ç ï¼‰
- âœ… å®Œæ•´çš„ç±»å‹æç¤ºå’Œæ–‡æ¡£
- âœ… **æ–°å¢ï¼šåŸºäºGradioçš„Web UIç•Œé¢**
- âœ… **æ–°å¢ï¼š.envæ–‡ä»¶é…ç½®æ”¯æŒ**

## å®‰è£…

```bash
pip install -r requirements.txt
```

## å¿«é€Ÿå¼€å§‹

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨Web UIç•Œé¢ï¼ˆæ¨èï¼‰

#### 1. é…ç½®APIå¯†é’¥

å¤åˆ¶ `env_example.txt` ä¸º `.env` æ–‡ä»¶ï¼Œå¹¶è®¾ç½®æ‚¨çš„Vidu APIå¯†é’¥ï¼š

```bash
# å¤åˆ¶ç¤ºä¾‹æ–‡ä»¶
cp env_example.txt .env

# ç¼–è¾‘.envæ–‡ä»¶ï¼Œè®¾ç½®æ‚¨çš„APIå¯†é’¥
VIDU_API_KEY=your_api_key_here
```

æˆ–è€…è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

```bash
export VIDU_API_KEY="your_api_key_here"
```

#### 2. å¯åŠ¨UI

```bash
# ä½¿ç”¨å¯åŠ¨è„šæœ¬
python start_ui.py

```

#### 3. è®¿é—®ç•Œé¢

å¯åŠ¨åï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š
- æœ¬åœ°è®¿é—®: http://localhost:7860
- å…¬ç½‘è®¿é—®: å¯åŠ¨åä¼šæ˜¾ç¤ºé“¾æ¥

### æ–¹æ³•äºŒï¼šä½¿ç”¨Pythonå®¢æˆ·ç«¯

#### åŸºæœ¬ä½¿ç”¨

```python
from vidu_client import ViduClient, ViduModel, ViduTaskStatus

# åˆå§‹åŒ–å®¢æˆ·ç«¯
client = ViduClient("your_api_key_here")

# åˆ›å»ºæ–‡ç”Ÿè§†é¢‘ä»»åŠ¡
response = client.text_to_video(
    model=ViduModel.VIDU1_5,
    prompt="ä¸€åªå¯çˆ±çš„å°çŒ«åœ¨èŠ±å›­é‡Œç©è€",
    duration=4
)

task_id = response['id']
print(f"ä»»åŠ¡åˆ›å»ºæˆåŠŸï¼ŒID: {task_id}")

# ç­‰å¾…ä»»åŠ¡å®Œæˆ
task_info = client.wait_for_completion(task_id)

# ä¸‹è½½ç”Ÿæˆç‰©
if task_info['state'] == ViduTaskStatus.SUCCESS:
    # ä¸‹è½½æ‰€æœ‰ç”Ÿæˆç‰©ï¼ˆåŒ…æ‹¬è§†é¢‘å’Œå°é¢ï¼‰
    downloaded_files = client.download_creation(
        task_info, 
        save_dir="./downloads", 
        filename_prefix=f"video_{task_id}"
    )
    print(f"ä¸‹è½½å®Œæˆ: {downloaded_files}")
```

#### ä½¿ç”¨ViduTaskç±»

```python
from vidu_client import ViduTask

# åˆ›å»ºä»»åŠ¡å¯¹è±¡
task = ViduTask(client, task_id)

# ç­‰å¾…å®Œæˆå¹¶ä¸‹è½½
task.wait_for_completion()
if task.is_success:
    # ä¸‹è½½è§†é¢‘
    video_path = task.download_video("./downloads/video.mp4")
    
    # ä¸‹è½½å°é¢
    cover_path = task.download_cover("./downloads/cover.jpg")
    
    # æˆ–è€…ä¸‹è½½æ‰€æœ‰ç”Ÿæˆç‰©
    all_files = task.download_creation("./downloads")
```

## Web UIç•Œé¢åŠŸèƒ½

### ğŸ¥ è§†é¢‘ç”Ÿæˆæ ‡ç­¾é¡µ

**åŠŸèƒ½**: åˆ›å»ºå„ç§ç±»å‹çš„è§†é¢‘ç”Ÿæˆä»»åŠ¡ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç­‰å¾…å®Œæˆå¹¶ä¸‹è½½æ–‡ä»¶

#### å›¾ç”Ÿè§†é¢‘ (Image to Video)

**åŠŸèƒ½**: æ ¹æ®ä¸Šä¼ çš„å›¾ç‰‡ç”Ÿæˆè§†é¢‘

**å‚æ•°è¯´æ˜**:
- **æ¨¡å‹**: é€‰æ‹©è§†é¢‘ç”Ÿæˆæ¨¡å‹ (viduq1, vidu2.0, vidu1.5)
- **ä¸Šä¼ å›¾ç‰‡**: æ”¯æŒ1å¼ å›¾ç‰‡ä¸Šä¼ 
- **æ–‡æœ¬æç¤ºè¯**: æè¿°è§†é¢‘æ•ˆæœçš„æ–‡æœ¬ï¼ˆå¯é€‰ï¼‰
- **è§†é¢‘æ—¶é•¿**: 4-8ç§’ï¼ˆæ ¹æ®æ¨¡å‹é™åˆ¶ï¼‰
- **éšæœºç§å­**: æ§åˆ¶ç”Ÿæˆç»“æœçš„éšæœºæ€§ï¼ˆ0è¡¨ç¤ºéšæœºï¼‰
- **åˆ†è¾¨ç‡**: è§†é¢‘åˆ†è¾¨ç‡ (360p, 720p, 1080p)
- **è¿åŠ¨å¹…åº¦**: è§†é¢‘è¿åŠ¨å¹…åº¦ (auto, small, medium, large)
- **èƒŒæ™¯éŸ³ä¹**: æ˜¯å¦æ·»åŠ èƒŒæ™¯éŸ³ä¹

**ä½¿ç”¨æ­¥éª¤**:
1. é€‰æ‹©æ¨¡å‹
2. ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶
3. å¡«å†™æç¤ºè¯ï¼ˆå¯é€‰ï¼‰
4. è°ƒæ•´å…¶ä»–å‚æ•°
5. ç‚¹å‡»"åˆ›å»ºå›¾ç”Ÿè§†é¢‘ä»»åŠ¡"

#### å‚è€ƒç”Ÿè§†é¢‘ (Reference to Video)

**åŠŸèƒ½**: æ ¹æ®å¤šå¼ å‚è€ƒå›¾ç‰‡ç”Ÿæˆè§†é¢‘

**å‚æ•°è¯´æ˜**:
- **æ¨¡å‹**: é€‰æ‹©è§†é¢‘ç”Ÿæˆæ¨¡å‹
- **å‚è€ƒå›¾ç‰‡**: ä¸Šä¼ 1-7å¼ å‚è€ƒå›¾ç‰‡
- **æ–‡æœ¬æç¤ºè¯**: å¿…å¡«ï¼Œæè¿°è§†é¢‘æ•ˆæœ
- **å®½é«˜æ¯”**: è§†é¢‘å®½é«˜æ¯” (16:9, 9:16, 1:1)
- å…¶ä»–å‚æ•°åŒå›¾ç”Ÿè§†é¢‘

#### é¦–å°¾å¸§ç”Ÿè§†é¢‘ (Start-End to Video)

**åŠŸèƒ½**: æ ¹æ®é¦–å¸§å’Œå°¾å¸§å›¾ç‰‡ç”Ÿæˆè§†é¢‘

**å‚æ•°è¯´æ˜**:
- **é¦–å¸§å›¾ç‰‡**: è§†é¢‘å¼€å§‹å¸§
- **å°¾å¸§å›¾ç‰‡**: è§†é¢‘ç»“æŸå¸§
- å…¶ä»–å‚æ•°åŒå›¾ç”Ÿè§†é¢‘

#### æ–‡ç”Ÿè§†é¢‘ (Text to Video)

**åŠŸèƒ½**: æ ¹æ®æ–‡æœ¬æè¿°ç”Ÿæˆè§†é¢‘

**å‚æ•°è¯´æ˜**:
- **æ–‡æœ¬æç¤ºè¯**: å¿…å¡«ï¼Œæè¿°è¦ç”Ÿæˆçš„è§†é¢‘å†…å®¹
- å…¶ä»–å‚æ•°åŒå‚è€ƒç”Ÿè§†é¢‘

### ğŸ¬ è§†é¢‘å¤„ç†æ ‡ç­¾é¡µ

#### æ™ºèƒ½è¶…æ¸… (Upscale Pro)

**åŠŸèƒ½**: æå‡è§†é¢‘åˆ†è¾¨ç‡

**å‚æ•°è¯´æ˜**:
- **è§†é¢‘URL**: è¦å¤„ç†çš„è§†é¢‘URL

#### å¯¹å£å‹ (Lip Sync)

**åŠŸèƒ½**: ä¸ºè§†é¢‘æ·»åŠ å£å‹åŒæ­¥

**å‚æ•°è¯´æ˜**:
- **è§†é¢‘URL**: è§†é¢‘æ–‡ä»¶URL
- **éŸ³é¢‘URL**: éŸ³é¢‘æ–‡ä»¶URL

### ğŸµ éŸ³é¢‘ç”Ÿæˆæ ‡ç­¾é¡µ

#### æ–‡ç”ŸéŸ³é¢‘ (Text to Audio)

**åŠŸèƒ½**: å°†æ–‡æœ¬è½¬æ¢ä¸ºéŸ³é¢‘

**å‚æ•°è¯´æ˜**:
- **éŸ³é¢‘æ¨¡å‹**: vidu-audio æˆ– vidu-audio-pro
- **æ–‡æœ¬å†…å®¹**: è¦è½¬æ¢çš„æ–‡æœ¬
- **å£°éŸ³ID**: å¯é€‰çš„å£°éŸ³ID

#### å¯æ§æ–‡ç”ŸéŸ³æ•ˆ (Timing to Audio)

**åŠŸèƒ½**: ç”Ÿæˆå¸¦æ—¶é—´æ§åˆ¶çš„éŸ³é¢‘

**å‚æ•°è¯´æ˜**:
- **æ—¶é—´æ§åˆ¶å‚æ•°**: JSONæ ¼å¼çš„æ—¶é—´æ§åˆ¶å‚æ•°
- å…¶ä»–å‚æ•°åŒæ–‡ç”ŸéŸ³é¢‘

**æ—¶é—´æ§åˆ¶å‚æ•°ç¤ºä¾‹**:
```json
[
  {
    "start_time": 0.0,
    "end_time": 2.0,
    "text": "æ¬¢è¿"
  },
  {
    "start_time": 2.0,
    "end_time": 4.0,
    "text": "ä½¿ç”¨"
  }
]
```

## ä¸‹è½½åŠŸèƒ½è¯¦è§£

### 1. ä¸‹è½½æ‰€æœ‰ç”Ÿæˆç‰©

```python
# ä¸‹è½½ä»»åŠ¡çš„æ‰€æœ‰ç”Ÿæˆç‰©ï¼ˆåŒ…æ‹¬è§†é¢‘å’Œå°é¢ï¼‰
downloaded_files = client.download_creation(
    task_info, 
    save_dir="./downloads", 
    filename_prefix="my_video"
)

# è¿”å›æ ¼å¼: {'main_0': 'path/to/video.mp4', 'cover_0': 'path/to/cover.jpg'}
```

### 2. åˆ†åˆ«ä¸‹è½½è§†é¢‘å’Œå°é¢

```python
# ä¸‹è½½è§†é¢‘æ–‡ä»¶
video_path = client.download_video(task_info, "./downloads/video.mp4")

# ä¸‹è½½å°é¢æ–‡ä»¶
cover_path = client.download_cover(task_info, "./downloads/cover.jpg")
```

### 3. æ‰¹é‡ä¸‹è½½å¤šä¸ªä»»åŠ¡

```python
task_ids = ["task_1", "task_2", "task_3"]

for i, task_id in enumerate(task_ids):
    task_info = client.query_task(task_id)
    
    if task_info['state'] == ViduTaskStatus.SUCCESS:
        # ä¸ºæ¯ä¸ªä»»åŠ¡åˆ›å»ºå•ç‹¬ç›®å½•
        save_dir = f"./downloads/batch_{i+1}"
        downloaded_files = client.download_creation(
            task_info, 
            save_dir=save_dir,
            filename_prefix=f"batch_{i+1}"
        )
        print(f"ä»»åŠ¡ {task_id} ä¸‹è½½å®Œæˆ")
```

### 4. ä½¿ç”¨ViduTaskç±»çš„ä¸‹è½½æ–¹æ³•

```python
task = ViduTask(client, task_id)
task.wait_for_completion()

if task.is_success:
    # è·å–URLä¿¡æ¯
    print(f"è§†é¢‘URL: {task.video_url}")
    print(f"å°é¢URL: {task.cover_url}")
    print(f"ç”Ÿæˆç‰©æ•°é‡: {len(task.creations)}")
    
    # ä¸‹è½½æ–‡ä»¶
    video_path = task.download_video("./downloads/video.mp4")
    cover_path = task.download_cover("./downloads/cover.jpg")
    all_files = task.download_creation("./downloads")
```

## APIå“åº”ç»“æ„

æ ¹æ®Vidu APIæ–‡æ¡£ï¼ŒæŸ¥è¯¢ä»»åŠ¡æ¥å£è¿”å›çš„æ•°æ®ç»“æ„å¦‚ä¸‹ï¼š

```json
{
  "id": "your_task_id",
  "state": "success",
  "err_code": "",
  "credits": 4,
  "payload": "",
  "creations": [
    {
      "id": "your_creations_id",
      "url": "your_generated_results_url",
      "cover_url": "your_generated_results_cover_url"
    }
  ]
}
```

## é”™è¯¯å¤„ç†

å®¢æˆ·ç«¯æä¾›äº†å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼š

```python
try:
    # åˆ›å»ºä»»åŠ¡
    response = client.text_to_video(
        model=ViduModel.VIDU1_5,
        prompt="æµ‹è¯•è§†é¢‘",
        duration=4
    )
    
    # ç­‰å¾…å®Œæˆ
    task_info = client.wait_for_completion(response['id'])
    
    # ä¸‹è½½æ–‡ä»¶
    if task_info['state'] == ViduTaskStatus.SUCCESS:
        downloaded_files = client.download_creation(task_info)
        print("ä¸‹è½½æˆåŠŸ")
    else:
        print(f"ä»»åŠ¡å¤±è´¥: {task_info.get('err_code')}")
        
except ValueError as e:
    print(f"å‚æ•°é”™è¯¯: {e}")
except requests.RequestException as e:
    print(f"ç½‘ç»œé”™è¯¯: {e}")
except TimeoutError as e:
    print(f"è¶…æ—¶é”™è¯¯: {e}")
except IOError as e:
    print(f"æ–‡ä»¶æ“ä½œé”™è¯¯: {e}")
```

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•è·å–Vidu APIå¯†é’¥ï¼Ÿ
A: è®¿é—® [Viduå¹³å°](https://platform.vidu.cn) æ³¨å†Œè´¦å·å¹¶è·å–APIå¯†é’¥ã€‚

### Q: å¦‚ä½•è®¾ç½®APIå¯†é’¥ï¼Ÿ
A: å¤åˆ¶ `env_example.txt` ä¸º `.env` æ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­è®¾ç½® `VIDU_API_KEY=your_api_key_here`ï¼Œæˆ–è€…è®¾ç½®ç¯å¢ƒå˜é‡ `VIDU_API_KEY`ã€‚

### Q: ä»»åŠ¡åˆ›å»ºå¤±è´¥æ€ä¹ˆåŠï¼Ÿ
A: æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æ­£ç¡®ï¼Œç½‘ç»œè¿æ¥æ˜¯å¦ç¨³å®šï¼Œå‚æ•°æ˜¯å¦ç¬¦åˆè¦æ±‚ã€‚

### Q: ä¸‹è½½æ–‡ä»¶å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
A: æ£€æŸ¥ç£ç›˜ç©ºé—´æ˜¯å¦å……è¶³ï¼Œç½‘ç»œè¿æ¥æ˜¯å¦ç¨³å®šã€‚

### Q: å¦‚ä½•ä¿®æ”¹UIä¸»é¢˜ï¼Ÿ
A: åœ¨ `.env` æ–‡ä»¶ä¸­è®¾ç½® `VIDU_UI_THEME=soft`ï¼Œæˆ–åœ¨ `config.py` ä¸­ä¿®æ”¹ `UI_THEME` å‚æ•°ï¼Œå¯é€‰å€¼ï¼šdefault, soft, glass, monochromeã€‚

### Q: å¦‚ä½•å¯ç”¨å…¬ç½‘è®¿é—®ï¼Ÿ
A: åœ¨ `.env` æ–‡ä»¶ä¸­è®¾ç½® `VIDU_SHARE_PUBLIC=true`ï¼Œæˆ–åœ¨ `config.py` ä¸­è®¾ç½® `SHARE_PUBLIC = True`ã€‚

## æ³¨æ„äº‹é¡¹

1. **APIå¯†é’¥å®‰å…¨**: è¯·å¦¥å–„ä¿ç®¡æ‚¨çš„APIå¯†é’¥ï¼Œä¸è¦æ³„éœ²ç»™ä»–äºº
2. **ç½‘ç»œè¿æ¥**: ç¡®ä¿ç½‘ç»œè¿æ¥ç¨³å®šï¼Œç‰¹åˆ«æ˜¯ä¸‹è½½å¤§æ–‡ä»¶æ—¶
3. **ç£ç›˜ç©ºé—´**: ç¡®ä¿æœ‰è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´å­˜å‚¨ä¸‹è½½çš„æ–‡ä»¶
4. **ä»»åŠ¡è¶…æ—¶**: é•¿æ—¶é—´ä»»åŠ¡å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´ï¼Œè¯·è€å¿ƒç­‰å¾…
5. **è‡ªåŠ¨ä¸‹è½½**: ä»»åŠ¡å®Œæˆåä¼šè‡ªåŠ¨ä¸‹è½½æ–‡ä»¶ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ
6. **æ–‡ä»¶æƒé™**: ç¡®ä¿å¯¹ä¸‹è½½ç›®å½•æœ‰å†™å…¥æƒé™
7. **URLæœ‰æ•ˆæœŸ**: ç”Ÿæˆç‰©çš„URLæœ‰1å°æ—¶æœ‰æ•ˆæœŸï¼Œè¯·åŠæ—¶ä¸‹è½½

## æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. ä¾èµ–åŒ…æ˜¯å¦æ­£ç¡®å®‰è£…
2. é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®
3. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
4. APIå¯†é’¥æ˜¯å¦æœ‰æ•ˆ

æ›´å¤šä¿¡æ¯è¯·å‚è€ƒé¡¹ç›®æ–‡æ¡£å’ŒVidu APIå®˜æ–¹æ–‡æ¡£ã€‚

## æ›´æ–°æ—¥å¿—

### v3.0.0
- âœ… æ–°å¢åŸºäºGradioçš„Web UIç•Œé¢
- âœ… æ–°å¢è‡ªåŠ¨ä»»åŠ¡å®Œæˆå’Œä¸‹è½½åŠŸèƒ½
- âœ… æ–°å¢.envæ–‡ä»¶é…ç½®æ”¯æŒ
- âœ… ç§»é™¤æ‰‹åŠ¨ä»»åŠ¡ç®¡ç†åŠŸèƒ½
- âœ… ç®€åŒ–ç”¨æˆ·æ“ä½œæµç¨‹

### v2.0.0
- âœ… æ–°å¢è‡ªåŠ¨ä¸‹è½½ç”Ÿæˆç‰©å’Œç”Ÿæˆç‰©å°é¢åŠŸèƒ½
- âœ… æ›´æ–°æŸ¥è¯¢ä»»åŠ¡æ¥å£ç«¯ç‚¹
- âœ… æ·»åŠ ViduTaskç±»çš„ä¸‹è½½æ–¹æ³•
- âœ… æ”¯æŒæ‰¹é‡ä¸‹è½½å¤šä¸ªä»»åŠ¡
- âœ… å®Œå–„é”™è¯¯å¤„ç†å’Œæ–‡æ¡£

### v1.0.0
- âœ… æ”¯æŒæ‰€æœ‰Vidu APIåŠŸèƒ½
- âœ… å®Œæ•´çš„å‚æ•°éªŒè¯
- âœ… ä»»åŠ¡çŠ¶æ€ç›‘æ§
- âœ… ç±»å‹æç¤ºå’Œæ–‡æ¡£

## è®¸å¯è¯

MIT License 